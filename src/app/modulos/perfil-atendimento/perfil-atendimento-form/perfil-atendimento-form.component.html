<div class="col-12">
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/">Início</a></li>
        <li class="breadcrumb-item active">Cadastro do Perfil de atendimento</li>
      </ol>
    </nav>
    <div *ngIf ="mostrarMens" class="alert alert-success" role="alert">
      <a type="button" class="close" data-dismiss="alert" aria-label="Fechar">
        <span aria-hidden="true">&times;</span>
      </a>
      Operação realizada com sucesso!!!
    </div>
    <div class="row mb-4">
      <div class="col-md">
        <h1 class="h3 border-left pl-2">
          Perfil de atendimento
        </h1>
      </div>
      <div class="col-md">
        <button type="button" routerLink="/servidor" class="btn btn-warning float-right">
          <i class="fas fa-backward"></i>&nbsp;Voltar
        </button>
      </div>
    </div>
    <form class="needs-validation" novalidate [formGroup]="perfilForm">
      <div class="card" style="box-shadow: 5px 5px 10px #000;">
        <div class="card-header">
          Formulário para cadastro do Perfil de Atendimento
        </div>
        <div class="card-body">
            <div class="form-row col-md-12">
                <div class="col-md-6">
                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">
                            <label for="servidor">Servidor:</label>
                            <select class="form-control" id="servidor" formControlName="matricula" (blur)="listarPerfil(perfilForm.get('matricula').value)">
                                <option value="" selected>Escolha o servidor</option>
                                <option *ngFor="let servidor of servidores" [value]="servidor.matricula">{{servidor.nome}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">
                           <span style="font-weight: bold; color: blue;"> Confira a matrícula: <span style="color: red">{{perfilForm.get('matricula').value}}</span></span>
                        </div>
                    </div>
                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">
                            <label for="detalheServico">Detalhamento de Serviços:</label>
                            <select multiple class="form-control" id="detalheServico" formControlName="servico">
                                <option *ngFor="let delServico of delServicos" [value]="delServico.id">{{delServico.descricao}}</option>
                            </select>
                            <small id="emailHelp" class="form-text text-muted">Para multipla selação mantenha a tecla Ctrl pressionada.</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" *ngIf="perfilAtendimentos != null ">
                    <span style="font-weight: bold; color: blue;">Acessos para: <span style="color: red">{{perfilForm.get('matricula').value}}</span> </span>
                    <table class="table table-hover" style="box-shadow: 5px 5px 10px #000; margin-top: 10px;">
                        <thead>
                          <tr class="bg-success text-light">
                            <th>ID</th>
                            <th>Servidor</th>
                            <th>Unidade</th>
                            <th>Tipo</th>
                            <th>Detalhamento</th>
                            <th>Serviço</th>                            
                            <th>Ações</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let perfilAtendimento of perfilAtendimentos">
                            <td>
                                {{perfilAtendimento.id}}
                            </td>
                            <td>
                                {{perfilAtendimento.servidor}}
                            </td>
                            <td>
                                {{perfilAtendimento.unidade}}
                            </td>
                            <td>
                                {{perfilAtendimento.role}}
                            </td>
                            <td>
                                {{perfilAtendimento.detalhamento}}
                            </td>
                            <td>
                                {{perfilAtendimento.servico}}
                            </td>
                            <td> 
                              <button (click)="onDelete(perfilAtendimento.id)" data-toggle="modal" data-target="#ModalExclusao" class="btn btn-outline-danger btn-sm"><i class="far fa-trash-alt"></i></button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                </div>
            </div>
        </div>
      </div>
    </form>
    <div>
      <button type="submit" class="btn btn-success float-right mt-2" (click)="onSubmit()">
      <i class="fas fa-save"></i> &nbsp;Salvar
      </button>
    </div>  
  </div>
 

